
> clarity-council-mcp@0.1.0 test
> vitest run


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90mA:/council/server[39m

{"level":"info","time":"2026-02-11T14:56:09.364Z","service":"clarity-council","event":"config.loaded","httpEnabled":false,"httpsEnabled":false,"httpPort":8080,"httpsPort":8000,"logLevel":"info","logFormat":"json","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-wdzrGk","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-KhowUg","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
{"level":"info","time":"2026-02-11T14:56:09.510Z","service":"clarity-council","event":"e2e.workflow.pass","message":"E2E workflow simulation completed successfully"}
{"level":"info","time":"2026-02-11T14:56:09.515Z","service":"clarity-council","event":"e2e.lifecycle.pass","state":"registering","message":"Container lifecycle handling verified"}
{"level":"info","time":"2026-02-11T14:56:09.516Z","service":"clarity-council","event":"e2e.metadata.pass","toolCount":4,"message":"Service metadata verified"}
{"level":"info","time":"2026-02-11T14:56:09.578Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"unhealthy","timestamp":"2026-02-11T14:56:09.578Z","message":"Service state transition: registering Î“Ã¥Ã† unhealthy"}
{"level":"info","time":"2026-02-11T14:56:09.579Z","service":"clarity-council","component":"dockerRegistration","event":"service.registration.success","serviceId":"clarity-council-docker-0.1.0","endpoint":{"protocol":"https","host":"localhost","port":8443,"basePath":"/"},"status":"unhealthy","currentState":"unhealthy","message":"Service registered with Docker Desktop MCP"}
{"level":"info","time":"2026-02-11T14:56:09.580Z","service":"clarity-council","component":"dockerRegistration","event":"health_check.polling.start","intervalMs":30000,"message":"Starting periodic health check polling"}
{"level":"info","time":"2026-02-11T14:56:09.584Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"stopped","timestamp":"2026-02-11T14:56:09.584Z","message":"Service state transition: registering Î“Ã¥Ã† stopped"}
 [32mÎ“Â£Ã´[39m ../tests/unit/dockerRegistration.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 204[2mms[22m[39m
{"level":"info","time":"2026-02-11T14:56:09.652Z","service":"clarity-council","event":"e2e.health.progression","message":"Health check progression verified"}
{"level":"info","time":"2026-02-11T14:56:09.426Z","service":"clarity-council","event":"config.loaded","httpEnabled":false,"httpsEnabled":false,"httpPort":8080,"httpsPort":8000,"logLevel":"info","logFormat":"json","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-0RNtRP","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-efPzRA","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
{"level":"info","time":"2026-02-11T14:56:09.547Z","service":"clarity-council","event":"config.loaded","httpEnabled":false,"httpsEnabled":false,"httpPort":8080,"httpsPort":8000,"logLevel":"info","logFormat":"json","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-G9WSU7","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-U6SitN","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
{"level":"info","time":"2026-02-11T14:56:09.642Z","service":"clarity-council","event":"config.loaded","httpEnabled":false,"httpsEnabled":false,"httpPort":8080,"httpsPort":8000,"logLevel":"info","logFormat":"json","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-2mCita","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-zHtsXt","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
{"level":"info","time":"2026-02-11T14:56:09.656Z","service":"clarity-council","event":"config.loaded","httpEnabled":false,"httpsEnabled":false,"httpPort":8080,"httpsPort":8000,"logLevel":"info","logFormat":"json","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-Zk4BiL","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-ZsxQiY","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
{"level":"info","time":"2026-02-11T14:56:09.667Z","service":"clarity-council","event":"config.loaded","httpEnabled":false,"httpsEnabled":false,"httpPort":8080,"httpsPort":8000,"logLevel":"info","logFormat":"json","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-ZIjBrW","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-XJEnZf","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
{"level":"info","time":"2026-02-11T14:56:09.679Z","service":"clarity-council","event":"config.loaded","httpEnabled":false,"httpsEnabled":false,"httpPort":8080,"httpsPort":8000,"logLevel":"info","logFormat":"json","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-aoKta7","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-UdQky7","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
{"level":"info","time":"2026-02-11T14:56:09.690Z","service":"clarity-council","event":"config.loaded","httpEnabled":false,"httpsEnabled":false,"httpPort":8080,"httpsPort":8000,"logLevel":"info","logFormat":"json","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-oMWws3","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-Cvj9WK","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
{"level":"info","time":"2026-02-11T14:56:09.707Z","service":"clarity-council","event":"config.loaded","httpEnabled":false,"httpsEnabled":false,"httpPort":8080,"httpsPort":8000,"logLevel":"info","logFormat":"json","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-3d6fsR","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-2xQmVN","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
{"level":"info","time":"2026-02-11T14:56:09.721Z","service":"clarity-council","event":"config.loaded","httpEnabled":false,"httpsEnabled":false,"httpPort":8080,"httpsPort":8000,"logLevel":"info","logFormat":"json","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-RfQ39R","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-QbOvaM","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
{"level":"info","time":"2026-02-11T14:56:09.731Z","service":"clarity-council","event":"config.loaded","httpEnabled":false,"httpsEnabled":false,"httpPort":8080,"httpsPort":8000,"logLevel":"info","logFormat":"json","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-eJuNl3","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-gFEAUc","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
 [32mÎ“Â£Ã´[39m ../tests/integration/schema-validation.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 189[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/healthCheck.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 282[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/integration/e2e-docker-workflow.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 315[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/secrets-prepared.spec.ts [2m([22m[2m11 tests[22m[2m)[22m[33m 386[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/integration/error-handling.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 193[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/define.input.spec.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 143[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/council.output.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 194[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/health-check-metrics.spec.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 492[2mms[22m[39m
{"level":"info","time":"2026-02-11T14:56:10.889Z","service":"clarity-council","requestId":"619ac6f4-92f5-46e7-b2d1-d96b8f4311a4","correlationId":"2985a9a3-f62a-4dd0-83f3-e7a63da999ed","tool":"council.define_personas","event":"tool.start","tool":"council.define_personas","input_chars":68,"message":"council.define_personas started"}
{"level":"info","time":"2026-02-11T14:56:10.902Z","service":"clarity-council","requestId":"a4cdadeb-20a2-410c-a539-88732bf3a539","correlationId":"b44dc5fb-200d-4588-aaa6-e1a9daaabb12","tool":"council.consult","event":"tool.start","tool":"council.consult","input_chars":143,"message":"council.consult started"}
{"level":"info","time":"2026-02-11T14:56:10.913Z","service":"clarity-council","requestId":"ed6c7818-4e12-4313-9991-2e0aedfe6012","correlationId":"2be330ff-389c-4186-b079-ed5a2db40015","tool":"persona.consult","event":"tool.start","tool":"persona.consult","input_chars":55,"message":"persona.consult started"}
{"level":"info","time":"2026-02-11T14:56:10.898Z","service":"clarity-council","requestId":"619ac6f4-92f5-46e7-b2d1-d96b8f4311a4","correlationId":"2985a9a3-f62a-4dd0-83f3-e7a63da999ed","tool":"council.define_personas","event":"tool.success","tool":"council.define_personas","duration_ms":10,"output_chars":4964,"message":"council.define_personas completed (10ms)"}
{"level":"info","time":"2026-02-11T14:56:10.900Z","service":"clarity-council","requestId":"feb71b2d-08d1-4bd7-bb0c-0b328d97259a","correlationId":"4e888ed4-9e9d-4616-97e8-b8b742882f5c","tool":"council.define_personas","event":"tool.start","tool":"council.define_personas","input_chars":2,"message":"council.define_personas started"}
{"level":"info","time":"2026-02-11T14:56:10.900Z","service":"clarity-council","requestId":"feb71b2d-08d1-4bd7-bb0c-0b328d97259a","correlationId":"4e888ed4-9e9d-4616-97e8-b8b742882f5c","tool":"council.define_personas","event":"tool.success","tool":"council.define_personas","duration_ms":1,"output_chars":4964,"message":"council.define_personas completed (1ms)"}
{"level":"info","time":"2026-02-11T14:56:10.905Z","service":"clarity-council","requestId":"99bdc047-0225-443f-9d9b-c7ce27d750a4","correlationId":"eb43b23e-06fe-4627-b275-4b0440ce71a7","tool":"council.define_personas","event":"tool.start","tool":"council.define_personas","input_chars":44,"message":"council.define_personas started"}
{"level":"error","time":"2026-02-11T14:56:10.912Z","service":"clarity-council","requestId":"99bdc047-0225-443f-9d9b-c7ce27d750a4","correlationId":"eb43b23e-06fe-4627-b275-4b0440ce71a7","tool":"council.define_personas","event":"tool.failure","tool":"council.define_personas","duration_ms":2,"errorCategory":"validation","error":{"name":"Error","message":"Invalid persona override: Unknown","stack":"Error: Invalid persona override: Unknown\n    at validateOverrides (A:/council/server/src/utils/workspaceConfig.ts:13:13)\n    at Object.handler (A:/council/server/src/tools/council.define_personas.ts:53:11)\n    at A:/council/tests/integration/overrides.spec.ts:71:31\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///A:/council/server/node_modules/@vitest/runner/dist/index.js:915:20"},"message":"council.define_personas failed (2ms)"}
 [32mÎ“Â£Ã´[39m ../tests/integration/overrides.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 107[2mms[22m[39m
{"level":"info","time":"2026-02-11T14:56:10.998Z","service":"clarity-council","requestId":"a4cdadeb-20a2-410c-a539-88732bf3a539","correlationId":"b44dc5fb-200d-4588-aaa6-e1a9daaabb12","tool":"council.consult","event":"tool.success","tool":"council.consult","duration_ms":95,"output_chars":39238,"message":"council.consult completed (95ms)"}
{"level":"error","time":"2026-02-11T14:56:11.007Z","service":"clarity-council","requestId":"ed6c7818-4e12-4313-9991-2e0aedfe6012","correlationId":"2be330ff-389c-4186-b079-ed5a2db40015","tool":"persona.consult","event":"tool.failure","tool":"persona.consult","duration_ms":92,"errorCategory":"validation","error":{"name":"Error","message":"Invalid input","stack":"Error: Invalid input\n    at Object.handler (A:/council/server/src/tools/persona.consult.ts:53:62)\n    at A:/council/tests/unit/errors.spec.ts:57:31\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///A:/council/server/node_modules/@vitest/runner/dist/index.js:915:20"},"message":"persona.consult failed (92ms)"}
{"level":"info","time":"2026-02-11T14:56:11.015Z","service":"clarity-council","requestId":"5ebfcc41-21a2-4c45-83c9-3dcfd9d335d0","correlationId":"730189d3-99c9-4ecd-8627-f563e22344ec","tool":"council.define_personas","event":"tool.start","tool":"council.define_personas","input_chars":61,"message":"council.define_personas started"}
{"level":"error","time":"2026-02-11T14:56:11.018Z","service":"clarity-council","requestId":"5ebfcc41-21a2-4c45-83c9-3dcfd9d335d0","correlationId":"730189d3-99c9-4ecd-8627-f563e22344ec","tool":"council.define_personas","event":"tool.failure","tool":"council.define_personas","duration_ms":3,"errorCategory":"validation","error":{"name":"Error","message":"Invalid input","stack":"Error: Invalid input\n    at Object.handler (A:/council/server/src/tools/council.define_personas.ts:32:70)\n    at A:/council/tests/unit/errors.spec.ts:90:31\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///A:/council/server/node_modules/@vitest/runner/dist/index.js:915:20"},"message":"council.define_personas failed (3ms)"}
 [32mÎ“Â£Ã´[39m ../tests/golden/council.personas.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 105[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/errors.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 112[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/council.input.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 74[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/persona.output.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 76[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/define.output.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 75[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/persona.input.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 74[2mms[22m[39m
{"level":"info","time":"2026-02-11T14:56:12.794Z","service":"clarity-council","requestId":"38b257c6-0225-45b8-b6f5-dc52b8c62a45","correlationId":"17dc1f9b-c60a-414b-86fc-fc5685799bdf","tool":"council.define_personas","event":"tool.start","tool":"council.define_personas","input_chars":2,"message":"council.define_personas started"}
{"level":"info","time":"2026-02-11T14:56:12.795Z","service":"clarity-council","requestId":"171a2038-db95-4312-8434-f85a8b190b2a","correlationId":"7093dfd8-46e1-4743-9f32-2d7541608160","tool":"persona.consult","event":"tool.start","tool":"persona.consult","input_chars":68,"message":"persona.consult started"}
{"level":"info","time":"2026-02-11T14:56:12.830Z","service":"clarity-council","requestId":"b7ffff4b-5ff0-4e98-bd96-ffb110677e0a","correlationId":"05fce3e6-b9ef-4824-8cf8-11a67b1a4105","tool":"council.discuss","event":"tool.start","tool":"council.discuss","input_chars":22,"message":"council.discuss started"}
{"level":"info","time":"2026-02-11T14:56:12.832Z","service":"clarity-council","requestId":"255ac2ca-314a-4f83-8438-095cc07404bb","correlationId":"7e242439-9964-4f01-b209-ad08e55ed6d1","tool":"council.discuss","event":"tool.start","tool":"council.discuss","input_chars":22,"message":"council.discuss started"}
 [32mÎ“Â£Ã´[39m ../tests/integration/council-discussion.spec.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 20[2mms[22m[39m
{"level":"info","time":"2026-02-11T14:56:12.903Z","service":"clarity-council","requestId":"171a2038-db95-4312-8434-f85a8b190b2a","correlationId":"7093dfd8-46e1-4743-9f32-2d7541608160","tool":"persona.consult","event":"tool.success","tool":"persona.consult","duration_ms":108,"output_chars":1221,"message":"persona.consult completed (108ms)"}
{"level":"info","time":"2026-02-11T14:56:12.908Z","service":"clarity-council","requestId":"344aea99-69d1-49b0-9f05-46a38142be41","correlationId":"9a1ef094-fa61-4843-b2f5-74158f4d597f","tool":"persona.consult","event":"tool.start","tool":"persona.consult","input_chars":68,"message":"persona.consult started"}
{"level":"info","time":"2026-02-11T14:56:12.908Z","service":"clarity-council","requestId":"344aea99-69d1-49b0-9f05-46a38142be41","correlationId":"9a1ef094-fa61-4843-b2f5-74158f4d597f","tool":"persona.consult","event":"tool.success","tool":"persona.consult","duration_ms":0,"output_chars":1220,"message":"persona.consult completed (0ms)"}
{"level":"info","time":"2026-02-11T14:56:12.909Z","service":"clarity-council","requestId":"7c23f4f1-4fc6-4080-b420-e8c224f999c5","correlationId":"9a5ce289-3dcb-4ed9-bdba-fe274f0032de","tool":"persona.consult","event":"tool.start","tool":"persona.consult","input_chars":67,"message":"persona.consult started"}
{"level":"info","time":"2026-02-11T14:56:12.909Z","service":"clarity-council","requestId":"7c23f4f1-4fc6-4080-b420-e8c224f999c5","correlationId":"9a5ce289-3dcb-4ed9-bdba-fe274f0032de","tool":"persona.consult","event":"tool.success","tool":"persona.consult","duration_ms":0,"output_chars":1201,"message":"persona.consult completed (0ms)"}
{"level":"info","time":"2026-02-11T14:56:12.911Z","service":"clarity-council","requestId":"6ef94684-efd6-4d68-93ec-6959fb568d6c","correlationId":"b845fe5e-76aa-4658-a724-fa544441aa4c","tool":"persona.consult","event":"tool.start","tool":"persona.consult","input_chars":64,"message":"persona.consult started"}
{"level":"info","time":"2026-02-11T14:56:12.911Z","service":"clarity-council","requestId":"6ef94684-efd6-4d68-93ec-6959fb568d6c","correlationId":"b845fe5e-76aa-4658-a724-fa544441aa4c","tool":"persona.consult","event":"tool.success","tool":"persona.consult","duration_ms":0,"output_chars":1196,"message":"persona.consult completed (0ms)"}
{"level":"info","time":"2026-02-11T14:56:12.912Z","service":"clarity-council","requestId":"8822ea0c-46c0-4318-a497-ef676d103ff5","correlationId":"99175ccd-9e3d-4103-bf30-0d3c8c73f33f","tool":"persona.consult","event":"tool.start","tool":"persona.consult","input_chars":68,"message":"persona.consult started"}
{"level":"info","time":"2026-02-11T14:56:12.913Z","service":"clarity-council","requestId":"8822ea0c-46c0-4318-a497-ef676d103ff5","correlationId":"99175ccd-9e3d-4103-bf30-0d3c8c73f33f","tool":"persona.consult","event":"tool.success","tool":"persona.consult","duration_ms":1,"output_chars":1202,"message":"persona.consult completed (1ms)"}
{"level":"info","time":"2026-02-11T14:56:12.913Z","service":"clarity-council","requestId":"690190a1-bb06-4074-b2b8-0ec0999aa948","correlationId":"e10254ee-d140-4687-944c-6ed56df5fc57","tool":"persona.consult","event":"tool.start","tool":"persona.consult","input_chars":63,"message":"persona.consult started"}
{"level":"info","time":"2026-02-11T14:56:12.913Z","service":"clarity-council","requestId":"690190a1-bb06-4074-b2b8-0ec0999aa948","correlationId":"e10254ee-d140-4687-944c-6ed56df5fc57","tool":"persona.consult","event":"tool.success","tool":"persona.consult","duration_ms":0,"output_chars":1206,"message":"persona.consult completed (0ms)"}
{"level":"info","time":"2026-02-11T14:56:12.915Z","service":"clarity-council","requestId":"b7ffff4b-5ff0-4e98-bd96-ffb110677e0a","correlationId":"05fce3e6-b9ef-4824-8cf8-11a67b1a4105","tool":"council.discuss","event":"tool.success","tool":"council.discuss","duration_ms":86,"output_chars":2093,"message":"council.discuss completed (86ms)"}
{"level":"info","time":"2026-02-11T14:56:12.925Z","service":"clarity-council","requestId":"8fe2e33d-c3c0-44d3-9a84-7ae2cdf2fcab","correlationId":"7df3ec3e-9ac2-46d2-accd-e2f8ab815bb1","tool":"council.discuss","event":"tool.start","tool":"council.discuss","input_chars":22,"message":"council.discuss started"}
{"level":"info","time":"2026-02-11T14:56:12.926Z","service":"clarity-council","requestId":"8fe2e33d-c3c0-44d3-9a84-7ae2cdf2fcab","correlationId":"7df3ec3e-9ac2-46d2-accd-e2f8ab815bb1","tool":"council.discuss","event":"tool.success","tool":"council.discuss","duration_ms":2,"output_chars":2093,"message":"council.discuss completed (2ms)"}
{"level":"info","time":"2026-02-11T14:56:12.921Z","service":"clarity-council","requestId":"255ac2ca-314a-4f83-8438-095cc07404bb","correlationId":"7e242439-9964-4f01-b209-ad08e55ed6d1","tool":"council.discuss","event":"tool.success","tool":"council.discuss","duration_ms":89,"output_chars":2093,"message":"council.discuss completed (89ms)"}
{"level":"info","time":"2026-02-11T14:56:12.922Z","service":"clarity-council","requestId":"c8c29128-aa51-4c79-b703-20351c189bc7","correlationId":"446b60e7-eea0-492d-a745-9fad8d9bb346","tool":"council.discuss","event":"tool.start","tool":"council.discuss","input_chars":82,"message":"council.discuss started"}
{"level":"info","time":"2026-02-11T14:56:12.922Z","service":"clarity-council","requestId":"c8c29128-aa51-4c79-b703-20351c189bc7","correlationId":"446b60e7-eea0-492d-a745-9fad8d9bb346","tool":"council.discuss","event":"tool.success","tool":"council.discuss","duration_ms":1,"output_chars":2737,"message":"council.discuss completed (1ms)"}
{"level":"info","time":"2026-02-11T14:56:12.928Z","service":"clarity-council","requestId":"46d7d787-52d6-4abd-96f2-5a5ca85a9a4e","correlationId":"61696118-ffac-4dfe-b34a-961c050e1ffa","tool":"council.consult","event":"tool.start","tool":"council.consult","input_chars":43,"message":"council.consult started"}
{"level":"info","time":"2026-02-11T14:56:12.934Z","service":"clarity-council","requestId":"46d7d787-52d6-4abd-96f2-5a5ca85a9a4e","correlationId":"61696118-ffac-4dfe-b34a-961c050e1ffa","tool":"council.consult","event":"tool.success","tool":"council.consult","duration_ms":6,"output_chars":26086,"message":"council.consult completed (6ms)"}
{"level":"info","time":"2026-02-11T14:56:12.923Z","service":"clarity-council","requestId":"38b257c6-0225-45b8-b6f5-dc52b8c62a45","correlationId":"17dc1f9b-c60a-414b-86fc-fc5685799bdf","tool":"council.define_personas","event":"tool.success","tool":"council.define_personas","duration_ms":130,"output_chars":4986,"message":"council.define_personas completed (130ms)"}
{"level":"info","time":"2026-02-11T14:56:12.932Z","service":"clarity-council","requestId":"7ab7b976-e887-496c-9952-e997cd760d77","correlationId":"5cc2e7e5-84fc-4731-9098-22116e9a7d95","tool":"persona.consult","event":"tool.start","tool":"persona.consult","input_chars":67,"message":"persona.consult started"}
{"level":"info","time":"2026-02-11T14:56:12.934Z","service":"clarity-council","requestId":"7ab7b976-e887-496c-9952-e997cd760d77","correlationId":"5cc2e7e5-84fc-4731-9098-22116e9a7d95","tool":"persona.consult","event":"tool.success","tool":"persona.consult","duration_ms":3,"output_chars":1214,"message":"persona.consult completed (3ms)"}
 [32mÎ“Â£Ã´[39m ../tests/golden/persona.tone.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 123[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/golden/clarification-prompts.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 91[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/integration/clarification-flow.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 96[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/golden/debate-exchanges.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/golden/persona.contracts.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 142[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/integration/extended-debate.spec.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 31[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/integration/council.discuss.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 106[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/integration/persona.consult.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 152[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/integration/council.consult.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 151[2mms[22m[39m
{"level":"info","time":"2026-02-11T14:56:13.041Z","service":"clarity-council","event":"config.loaded","httpEnabled":true,"httpsEnabled":true,"httpPort":8081,"httpsPort":8443,"logLevel":"debug","logFormat":"text","workspaceDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\workspace-4ty9Q0","certDir":"C:\\Users\\ris\\AppData\\Local\\Temp\\certs-qu2Enk","authEnabled":"[REDACTED]","secretsDir":"[REDACTED]","interactiveModeEnabled":true,"debateCycleLimit":10,"extendedDebateCycleLimit":20,"message":"Configuration loaded"}
 [32mÎ“Â£Ã´[39m ../tests/unit/config.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/integration/session-recovery.spec.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/debate-cycle.spec.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/integration/container-lifecycle.spec.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/persona-selection.spec.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 14[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/golden/persona-override-tone.spec.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/golden/assumption-statements.spec.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/clarification-revisit.spec.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 10[2mms[22m[39m
{"level":"info","time":"2026-02-11T14:56:15.017Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.load.success","filePath":"A:\\council\\server\\.test-workspace\\personas.overrides.json","personaCount":2,"lastModified":"2026-02-11T14:56:15.014Z","message":"Loaded persona overrides for 2 personas"}
{"level":"info","time":"2026-02-11T14:56:15.025Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.load.success","filePath":"A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json","personaCount":1,"lastModified":"2026-02-11T14:56:15.004Z","message":"Loaded persona overrides for 1 personas"}
 [32mÎ“Â£Ã´[39m ../tests/integration/graceful-shutdown.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/clarification-skip.spec.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 21[2mms[22m[39m
{"level":"error","time":"2026-02-11T14:56:15.026Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.load.error","filePath":"A:\\council\\server\\.test-workspace\\personas.overrides.json","error":"Expected property name or '}' in JSON at position 2 (line 1 column 3)","message":"Failed to load persona overrides"}
{"level":"error","time":"2026-02-11T14:56:15.030Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.load.error","filePath":"A:\\council\\server\\.test-workspace\\personas.overrides.json","error":"Validation failed: Invalid version: 'undefined' (expected '1.0')","message":"Failed to load persona overrides"}
{"level":"info","time":"2026-02-11T14:56:15.035Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.save.success","filePath":"A:\\council\\server\\.test-workspace\\personas.overrides.json","personaCount":1,"message":"Saved persona overrides for 1 personas"}
{"level":"error","time":"2026-02-11T14:56:15.037Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.save.error","filePath":"A:\\council\\server\\.test-workspace\\personas.overrides.json","error":"Validation failed: devilsAdvocate: 'enabled' must be a boolean","message":"Failed to save persona overrides"}
{"level":"info","time":"2026-02-11T14:56:15.040Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.load.success","filePath":"A:\\council\\server\\.test-workspace\\personas.overrides.json","personaCount":1,"lastModified":"2026-02-11T14:56:15.039Z","message":"Loaded persona overrides for 1 personas"}
{"level":"info","time":"2026-02-11T14:56:15.046Z","service":"clarity-council","component":"personaConfigWatcher","event":"watcher.start","filePath":"A:\\council\\server\\.test-workspace\\personas.overrides.json","message":"Watching for persona override changes: A:\\council\\server\\.test-workspace\\personas.overrides.json"}
{"level":"info","time":"2026-02-11T14:56:15.048Z","service":"clarity-council","component":"personaConfigWatcher","event":"watcher.stop","message":"Stopped watching for persona override changes"}
 [32mÎ“Â£Ã´[39m ../tests/unit/file-watcher.spec.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 40[2mms[22m[39m
{"level":"info","time":"2026-02-11T14:56:15.026Z","service":"clarity-council","component":"personaConfigWatcher","event":"watcher.start","filePath":"A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json","message":"Watching for persona override changes: A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json"}
{"level":"info","time":"2026-02-11T14:56:15.027Z","service":"clarity-council","component":"personaConfigWatcher","event":"watcher.stop","message":"Stopped watching for persona override changes"}
{"level":"info","time":"2026-02-11T14:56:15.033Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.load.success","filePath":"A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json","personaCount":1,"lastModified":"2026-02-11T14:56:15.031Z","message":"Loaded persona overrides for 1 personas"}
{"level":"info","time":"2026-02-11T14:56:15.039Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.save.success","filePath":"A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json","personaCount":1,"message":"Saved persona overrides for 1 personas"}
{"level":"info","time":"2026-02-11T14:56:15.045Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.save.success","filePath":"A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json","personaCount":1,"message":"Saved persona overrides for 1 personas"}
{"level":"info","time":"2026-02-11T14:56:15.049Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.save.success","filePath":"A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json","personaCount":1,"message":"Saved persona overrides for 1 personas"}
{"level":"info","time":"2026-02-11T14:56:15.050Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.load.success","filePath":"A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json","personaCount":1,"lastModified":"2026-02-11T14:56:15.045Z","message":"Loaded persona overrides for 1 personas"}
{"level":"info","time":"2026-02-11T14:56:15.054Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.load.success","filePath":"A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json","personaCount":1,"lastModified":"2026-02-11T14:56:15.053Z","message":"Loaded persona overrides for 1 personas"}
{"level":"info","time":"2026-02-11T14:56:15.060Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.save.success","filePath":"A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json","personaCount":1,"message":"Saved persona overrides for 1 personas"}
{"level":"info","time":"2026-02-11T14:56:15.065Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.load.success","filePath":"A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json","personaCount":1,"lastModified":"2026-02-11T14:56:15.064Z","message":"Loaded persona overrides for 1 personas"}
{"level":"info","time":"2026-02-11T14:56:15.066Z","service":"clarity-council","component":"personaConfigWatcher","event":"override.load.success","filePath":"A:\\council\\server\\.test-hotreload-workspace\\personas.overrides.json","personaCount":2,"lastModified":"2026-02-11T14:56:15.065Z","message":"Loaded persona overrides for 2 personas"}
 [32mÎ“Â£Ã´[39m ../tests/integration/persona-hotreload.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 71[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/logger.spec.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 18[2mms[22m[39m
{"level":"info","time":"2026-02-11T14:56:15.119Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"stopped","timestamp":"2026-02-11T14:56:15.118Z","message":"Service state transition: registering Î“Ã¥Ã† stopped"}
{"level":"info","time":"2026-02-11T14:56:15.121Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"stopped","timestamp":"2026-02-11T14:56:15.121Z","message":"Service state transition: registering Î“Ã¥Ã† stopped"}
{"level":"info","time":"2026-02-11T14:56:15.122Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"stopped","timestamp":"2026-02-11T14:56:15.122Z","message":"Service state transition: registering Î“Ã¥Ã† stopped"}
{"level":"info","time":"2026-02-11T14:56:15.122Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"stopped","timestamp":"2026-02-11T14:56:15.122Z","message":"Service state transition: registering Î“Ã¥Ã† stopped"}
{"level":"info","time":"2026-02-11T14:56:15.123Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"stopped","timestamp":"2026-02-11T14:56:15.123Z","message":"Service state transition: registering Î“Ã¥Ã† stopped"}
{"level":"info","time":"2026-02-11T14:56:15.123Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"stopped","timestamp":"2026-02-11T14:56:15.123Z","message":"Service state transition: registering Î“Ã¥Ã† stopped"}
{"level":"info","time":"2026-02-11T14:56:15.123Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"stopped","timestamp":"2026-02-11T14:56:15.123Z","message":"Service state transition: registering Î“Ã¥Ã† stopped"}
{"level":"info","time":"2026-02-11T14:56:15.123Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"stopped","timestamp":"2026-02-11T14:56:15.123Z","message":"Service state transition: registering Î“Ã¥Ã† stopped"}
{"level":"info","time":"2026-02-11T14:56:15.124Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"stopped","timestamp":"2026-02-11T14:56:15.124Z","message":"Service state transition: registering Î“Ã¥Ã† stopped"}
{"level":"info","time":"2026-02-11T14:56:15.124Z","service":"clarity-council","component":"dockerRegistration","event":"service.state.transition","fromState":"registering","toState":"stopped","timestamp":"2026-02-11T14:56:15.124Z","message":"Service state transition: registering Î“Ã¥Ã† stopped"}
 [32mÎ“Â£Ã´[39m ../tests/unit/dockerRegistration-phase4.spec.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/clarification-sequencing.spec.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m
 [32mÎ“Â£Ã´[39m ../tests/unit/clarification-detection.spec.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 3[2mms[22m[39m

[2m Test Files [22m [1m[32m42 passed[39m[22m[90m (42)[39m
[2m      Tests [22m [1m[32m207 passed[39m[22m[90m (207)[39m
[2m   Start at [22m 09:56:06
[2m   Duration [22m 8.89s[2m (transform 23.22s, setup 0ms, import 41.83s, tests 4.27s, environment 11ms)[22m

